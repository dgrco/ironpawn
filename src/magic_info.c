#include "magic_info.h"

void __set_magic_info_from_array(unsigned long long *magics,
                                 unsigned int *shifts,
                                 unsigned long long *magic_buffer,
                                 unsigned int *shift_buffer) {
  for (unsigned int i = 0; i < 64; i++) {
    magics[i] = magic_buffer[i];
    shifts[i] = shift_buffer[i];
  }
}

/**
 * @brief Initialize the *_MAGICS and *_SHIFTS arrays.
 */
MagicInfo init_magic_info() {
  // NOTE: Since this is the only function, I will keep this in the header (for
  // now).

  MagicInfo magic_info;

  //
  // Rook info
  unsigned long long r_magic_buffer[64] = {
      108088864960249872,  432363439883585664,  585472354055620896,
      2384656277839022112, 4683746120742998017, 3467772262915047456,
      36029346791580160,   324264670731092096,  757589904382803968,
      1225260608285327360, 297246406396153888,  14108950389719328,
      316693713389600,     18084930999615492,   3377845758329104,
      9570166392234115,    39616786726978,      9007478496837640,
      4756366377493725189, 72980117849092,      58411622342658,
      1726370711339392,    578718049742389314,  158398396055617,
      1125968760555648,    11294187752275968,   1444776130396192,
      5225310264034856960, 1443416875013767424, 1152958956738709632,
      140754936676360,     1725133903380496,    90072550895517952,
      2251869071082496,    1229491537315890178, 9728479152048258,
      181833659622883344,  144722187851431940,  1153702158399963458,
      9009673726329668,    36064256270041088,   22536690911938560,
      74344582619891714,   23643915263414272,   1297178546866884616,
      18014949409325057,   2310355474727374880, 2305843558973726722,
      576498239851757696,  99083796009730112,   2454461831276920864,
      148671856321372176,  4613942216691155464, 1152956697569132676,
      2594091528381538306, 35188767854593,      3611922162849454146,
      720892874606252585,  308848967987233938,  290554743749882386,
      1152947893171127813, 24189399489538,      844975239594315,
      72062077994303562};
  unsigned int r_shift_buffer[64] = {
      52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52,
      52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52,
      52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52, 52,
      52, 52, 52, 52, 52, 52, 51, 51, 51, 51, 51, 51, 51, 51, 51, 51};

  __set_magic_info_from_array(magic_info.ROOK_MAGICS, magic_info.ROOK_SHIFTS,
                              r_magic_buffer, r_shift_buffer);

  //
  // Bishop info
  unsigned long long b_magic_buffer[64] = {
      2310628647601472130, 299075753754793,     290271611340864,
      1155322975515314176, 2306005754259296256, 4611972475901968388,
      4611694819086959104, 1225260608052809748, 4760588531674415240,
      2306705117071613985, 288303253165244416,  72101853759799296,
      216208928692764672,  582092452280673040,  4630845559438098432,
      2257297506174498,    4521209669615976,    2603090007921033610,
      1732205820017639945, 600780059066403,     2269410257568768,
      1227266083917421568, 596181628435824897,  540713435634377728,
      70506720069122,      4616190718174577672, 2370371293703848704,
      1134700431278272,    4506348473584640,    111463025346564,
      1154047473233690896, 1126455036610568,    5658159856747008,
      396616117842362384,  4683779415316959360, 612494084942332160,
      9009415457899528,    289798314365355016,  1170988718329208961,
      4613093410558050561, 180328505278532,     36037627639500936,
      4865022517703631112, 2313445547476993,    450360255096815681,
      5769128861954607136, 9609766001705540,    299489512730918916,
      1191492376871370792, 2377971007060314636, 91198717365862402,
      5215169476639064068, 1152991881961947204, 9007749815894097,
      5836737719225556993, 2386943194127475203, 70437799567360,
      6926958475203317762, 1297036710165742364, 40814009351472417,
      1170971362903326758, 1153001116659634568, 5092946584142342,
      1238577927462357028};
  unsigned int b_shift_buffer[64] = {
      56, 56, 56, 56, 56, 56, 56, 56, 56, 56, 56, 56, 56, 56, 56, 56,
      56, 56, 56, 56, 56, 56, 56, 56, 56, 56, 56, 55, 55, 55, 55, 55,
      55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55,
      55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55};

  __set_magic_info_from_array(magic_info.BISHOP_MAGICS,
                              magic_info.BISHOP_SHIFTS, b_magic_buffer,
                              b_shift_buffer);

  return magic_info;
}
